function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _sliceIterator(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var s,i=e[Symbol.iterator]();!(r=(s=i.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==i.return||i.return()}finally{if(o)throw a}}return n}function _slicedToArray(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return _sliceIterator(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}!function(e,t){var n=t.element.prototype.closest;if(!n){var r=["matches","matchesSelector","webkitMatches","webkitMatchesSelector","msMatches","msMatchesSelector","mozMatches","mozMatchesSelector"].reduce(function(e,t){var n;return null!==(n=e)&&void 0!==n?n:t in document.documentElement?t:null},null);n=function(e){for(var n,o=this[0].parentNode;o!==document.documentElement&&null!=o&&!o[r](e);)o=o.parentNode;return(null===(n=o)||void 0===n?void 0:n[r](e))?t.element(o):t.element()}}function o(){var t,n,r,o;return"pageYOffset"in e?{scrollTop:e.pageYOffset,scrollLeft:e.pageXOffset}:{scrollTop:null!==(t=null!==(n=document.documentElement.scrollTop)&&void 0!==n?n:document.body.scrollTop)&&void 0!==t?t:0,scrollLeft:null!==(r=null!==(o=document.documentElement.scrollLeft)&&void 0!==o?o:document.body.scrollLeft)&&void 0!==r?r:0}}function a(t,n){return t===e?"clientWidth"===n?e.innerWidth:e.innerHeight:t[n]}function s(e,t){!function(e,t){console.warn("vs-repeat deprecation: ".concat(t),e[0])}(t,"".concat(e," attribute is deprecated. Pass the options object to vs-repeat attribute instead https://github.com/kamilkp/angular-vs-repeat#options"))}var i={latch:!1,container:null,scrollParent:null,size:null,offsetBefore:0,offsetAfter:0,scrolledToBeginning:t.noop,scrolledToEnd:t.noop,scrolledToBeginningOffset:0,scrolledToEndOffset:0,scrollMargin:0,horizontal:!1,autoresize:!1,hunked:!1,hunkSize:0},l=t.module("vs-repeat",[]).directive("vsRepeat",["$compile","$parse",function(r,l){return{restrict:"A",scope:!0,compile:function(d,c){var u="vsRepeatContainer"in c?t.element(d[0].querySelector(c.vsRepeatContainer)):d,v=u.children(),f=v.eq(0),p=f[0].outerHTML,h="$vs_collection";["vsSize","vsScrollParent","vsSizeProperty","vsHorizontal","vsOffsetBefore","vsOffsetAfter","vsScrolledToEndOffset","vsScrolledToBeginningOffset","vsExcess","vsScrollMargin"].forEach(function(e){e in c&&s(e,d)});var g=_slicedToArray(function(e){for(var t=["ng-repeat","data-ng-repeat","ng-repeat-start","data-ng-repeat-start"],n=0;n<t.length;n++){var r=t[n];if(e.attr(r))return[r,e.attr(r),r.indexOf("-start")>=0]}throw new Error("angular-vs-repeat: no ng-repeat directive on a child element")}(f),3),m=g[0],R=g[1],x=g[2],y=_slicedToArray(/^\s*(\S+)\s+in\s+([\S\s]+?)(track\s+by\s+\S+)?$/.exec(R),4),$=y[1],z=y[2],b=y[3];if(x)for(var I=0,w=v.eq(I);null==w.attr("ng-repeat-end")&&null==w.attr("data-ng-repeat-end");)I++,w=v.eq(I),p+=w[0].outerHTML;return u.empty(),{pre:function(s,d,c){var u;function v(e){if("number"==typeof e.size)e.getSize=function(){return e.size};else{var t=l(String(e.size));e.getSize=function(e){return t(s,_defineProperty({},$,e))}}}s.vsRepeat={options:_extends({},i,null!==(u=s.$eval(c.vsRepeat))&&void 0!==u?u:{})};var f=s.vsRepeat.options;v(f);var g,R=t.isDefined(c.vsRepeatContainer)?t.element(d[0].querySelector(c.vsRepeatContainer)):d,y=t.element(p),I=y[0].tagName.toLowerCase(),w=[],S=t.element("<"+I+' class="vs-repeat-before-content"></'+I+">"),T=t.element("<"+I+' class="vs-repeat-after-content"></'+I+">"),A=null===f.size,O=f.scrollParent?"window"===f.scrollParent?t.element(e):n.call(R,f.scrollParent):R,C=f.horizontal?"clientWidth":"clientHeight",M=f.horizontal?"offsetWidth":"offsetHeight",_=(f.horizontal,f.horizontal?"scrollLeft":"scrollTop");if(s.vsRepeat.totalSize=0,0===O.length)throw"Specified scroll parent selector did not match any element";if(s.vsRepeat.$scrollParent=O,s.vsRepeat.sizesCumulative=[],f.debug){var B="window"===f.scrollParent?t.element(document.body):O,E=t.element('<div class="vs-repeat-debug-element"></div>');E.css("position","window"===f.scrollParent?"fixed":"absolute"),B.append(E),s.$on("$destroy",function(){E.remove()})}var P,k,L,q,H,j=a(O[0],C)||50;function W(){!w||w.length<1?(s[h]=[],g=0,s.vsRepeat.sizesCumulative=[0]):(g=w.length,f.size?N():D()),U()}function N(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=w.map(function(t){var n;return null!==(n=e)&&void 0!==n?n:f.getSize(t)}),n=0;s.vsRepeat.sizesCumulative=[0].concat(_toConsumableArray(t.map(function(e){return n+=e})))}function D(){A?s.$$postDigest(function(){if(R[0].offsetHeight||R[0].offsetWidth){for(var e=R.children(),t=0,n=!1,r=!1;t<e.length;){if(null!=e[t].attributes[m]||r){if(n||(j=0),n=!0,e[t][M]&&(j+=e[t][M]),!x)break;if(null!=e[t].attributes["ng-repeat-end"]||null!=e[t].attributes["data-ng-repeat-end"])break;r=!0}t++}n&&(N(j),A=!1,U(),s.$root&&!s.$root.$$phase&&s.$digest())}else var o=s.$watch(function(){(R[0].offsetHeight||R[0].offsetWidth)&&(o(),D())})}):N(j)}function F(e){var t=f.horizontal?"width":"height";return["","min-","max-"].reduce(function(n,r){return n["".concat(r).concat(t)]=e,n},{})}function J(){var e=O[0][_];K()&&(s.$digest(),f._ensureScrollIntegrity&&(O[0][_]=e))}function Y(){f.autoresize&&(A=!0,D(),s.$root&&!s.$root.$$phase&&s.$digest()),K()&&s.$digest()}function U(){var e;P=void 0,k=void 0,L=g,q=0,e=s.vsRepeat.sizesCumulative[g],s.vsRepeat.totalSize=f.offsetBefore+e+f.offsetAfter,K(),s.$emit("vsRepeatReinitialized",s.vsRepeat.startIndex,s.vsRepeat.endIndex)}function X(){var e=a(O[0],C);e!==H&&(U(),s.$root&&!s.$root.$$phase&&s.$digest()),H=e}function G(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length-1,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;if(e[n]===t)return[n,n,o];if(e[r]===t)return[r,r,o];if(r-n>1){var a=Math.floor((n+r)/2);return e[a]>t?G(e,t,n,a,o+1):G(e,t,a,r,o+1)}return[t>e[r]?r:n,t<e[n]?n:r,o]}function K(){var t,n,r=(t=O[0],n=_,t===e?o()[n]:t[n]),i=a(O[0],C);f.debug&&(i/=2);var l,d,c,u=R[0]===O[0]?0:(l=R[0],d=O[0],c=f.horizontal,l.getBoundingClientRect()[c?"left":"top"]-(d===e?0:d.getBoundingClientRect()[c?"left":"top"])+(d===e?o():d)[c?"scrollLeft":"scrollTop"]),v=s.vsRepeat.startIndex,p=s.vsRepeat.endIndex;if(A&&!f.size)v=0,p=1;else{var m=r-f.offsetBefore-u;v=_slicedToArray(G(s.vsRepeat.sizesCumulative,m-f.scrollMargin),1)[0],v=Math.max(v,0),p=_slicedToArray(G(s.vsRepeat.sizesCumulative,m+f.scrollMargin+i,v),2)[1],p=Math.min(p,g)}L=Math.min(v,L),q=Math.max(p,q),s.vsRepeat.startIndex=f.latch?L:v,s.vsRepeat.endIndex=f.latch?q:p,q<s.vsRepeat.startIndex&&(s.vsRepeat.startIndex=q);var x=!1;if(null==P?x=!0:null==k&&(x=!0),x||(f.hunked?Math.abs(s.vsRepeat.startIndex-P)>=f.hunkSize||0===s.vsRepeat.startIndex&&0!==P?x=!0:(Math.abs(s.vsRepeat.endIndex-k)>=f.hunkSize||s.vsRepeat.endIndex===g&&k!==g)&&(x=!0):x=s.vsRepeat.startIndex!==P||s.vsRepeat.endIndex!==k),x){var y;s[h]=w.slice(s.vsRepeat.startIndex,s.vsRepeat.endIndex),s.$emit("vsRepeatInnerCollectionUpdated",s.vsRepeat.startIndex,s.vsRepeat.endIndex,P,k),f.scrolledToEnd&&(y=w.length-f.scrolledToEndOffset,(s.vsRepeat.endIndex>=y&&k<y||w.length&&s.vsRepeat.endIndex===w.length)&&s.$eval(f.scrolledToEnd)),f.scrolledToBeginning&&(y=f.scrolledToBeginningOffset,s.vsRepeat.startIndex<=y&&P>s.vsRepeat.startIndex&&s.$eval(f.scrolledToBeginning)),P=s.vsRepeat.startIndex,k=s.vsRepeat.endIndex;var $=s.vsRepeat.sizesCumulative[s.vsRepeat.startIndex]+f.offsetBefore,z=s.vsRepeat.sizesCumulative[s.vsRepeat.startIndex+s[h].length]+f.offsetBefore,b=s.vsRepeat.totalSize;S.css(F($+"px")),T.css(F(b-z+"px"))}return x}f.horizontal?(S.css("height","100%"),T.css("height","100%")):(S.css("width","100%"),T.css("width","100%")),c.vsRepeatOptions&&s.$watchCollection(c.vsRepeatOptions,function(e){var t=_extends({},f,e);JSON.stringify(t)!==JSON.stringify(f)&&(Object.assign(f,e),v(f),U())}),s.$watchCollection(z,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];w=e,W()}),y.eq(0).attr(m,$+" in "+h+(b?" "+b:"")),y.addClass("vs-repeat-repeated-element"),R.append(S),R.append(y),r(y)(s),R.append(T),s.vsRepeat.startIndex=0,s.vsRepeat.endIndex=0,O.on("scroll",J),t.element(e).on("resize",Y),s.$on("$destroy",function(){t.element(e).off("resize",Y),O.off("scroll",J)}),s.$on("vsRepeatTrigger",W),s.$on("vsRepeatResize",function(){A=!0,D()}),s.$on("vsRenderAll",function(){f.latch&&(s.vsRepeat.endIndex!==g?setTimeout(function(){var e=g;q=Math.max(e,q),s.vsRepeat.endIndex=f.latch?q:e,s[h]=w.slice(s.vsRepeat.startIndex,s.vsRepeat.endIndex),k=s.vsRepeat.endIndex,S.css(F(0)),T.css(F(0)),s.$emit("vsRenderAllDone"),s.$root&&!s.$root.$$phase&&s.$digest()}):s.$emit("vsRenderAllDone"))}),s.$watch(function(){"function"==typeof e.requestAnimationFrame?e.requestAnimationFrame(X):X()})}}}}}]);t.element(document.head).append('<style id="angular-vs-repeat-style">\n\t  \t.vs-repeat-debug-element {\n        top: 50%;\n        left: 0;\n        right: 0;\n        height: 1px;\n        background: red;\n        z-index: 99999999;\n        box-shadow: 0 0 20px red;\n      }\n\n      .vs-repeat-debug-element + .vs-repeat-debug-element {\n        display: none;\n      }\n\n      .vs-repeat-before-content,\n      .vs-repeat-after-content {\n        border: none !important;\n        padding: 0 !important;\n      }\n    </style>'),"undefined"!=typeof module&&module.exports&&(module.exports=l.name)}(window,window.angular);